<div class="modern-form-container">
  <div class="modern-form-wrapper">
    <div class="modern-form-header">
      <h2 class="modern-form-title">
        <fa-icon [icon]="['fas', 'exchange-alt']" class="me-2"></fa-icon>
        <span appTranslate="longonkeloApp.transferenciaTurma.home.createOrEditLabel"> Criar ou editar Transferencia Turma </span>
      </h2>
    </div>

    <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm" class="modern-form">
      <app-alert-error></app-alert-error>

      <!-- Hidden ID field -->
      <input type="hidden" name="id" formControlName="id" *ngIf="editForm.controls.id.value !== null" />

      <!-- Seção 1: Dados da Transferência -->
      <fieldset class="modern-form-section">
        <legend class="modern-form-section-title">
          <fa-icon [icon]="['fas', 'info-circle']" class="section-icon me-2"></fa-icon>
          <span>Dados da Transferência</span>
        </legend>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_timestamp">
              <fa-icon [icon]="['fas', 'clock']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.timestamp">Data e Hora</span>
            </label>
            <input
              id="field_timestamp"
              data-cy="timestamp"
              type="datetime-local"
              class="form-control"
              name="timestamp"
              formControlName="timestamp"
              placeholder="YYYY-MM-DD HH:mm"
            />
            <small class="form-text text-muted"> Data e hora da solicitação de transferência </small>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_motivoTransferencia">
              <fa-icon [icon]="['fas', 'comment-alt']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.motivoTransferencia">Motivo da Transferência</span>
            </label>
            <select
              class="form-control"
              id="field_motivoTransferencia"
              data-cy="motivoTransferencia"
              name="motivoTransferencia"
              formControlName="motivoTransferencia"
              [compareWith]="compareLookupItem"
            >
              <option [ngValue]="null">Selecione um motivo</option>
              <option [ngValue]="lookupItemOption" *ngFor="let lookupItemOption of lookupItemsSharedCollection">
                {{ lookupItemOption.descricao }}
              </option>
            </select>
          </div>
        </div>
      </fieldset>

      <!-- Seção 2: Turmas da Transferência -->
      <fieldset class="modern-form-section">
        <legend class="modern-form-section-title">
          <fa-icon [icon]="['fas', 'arrows-alt-h']" class="section-icon me-2"></fa-icon>
          <span>Turmas da Transferência</span>
        </legend>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_de">
              <fa-icon [icon]="['fas', 'arrow-right']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.de">Turma de Origem</span>
              <span class="text-danger">*</span>
            </label>
            <select
              class="form-control"
              id="field_de"
              data-cy="de"
              name="de"
              formControlName="de"
              [compareWith]="compareTurma"
              [class.is-invalid]="editForm.get(['de'])!.invalid && (editForm.get(['de'])!.dirty || editForm.get(['de'])!.touched)"
            >
              <option *ngIf="!editForm.get('de')!.value" [ngValue]="null" selected>Selecione a turma de origem</option>
              <option [ngValue]="turmaOption" *ngFor="let turmaOption of turmasSharedCollection">
                {{ turmaOption.descricao }}
              </option>
            </select>
            <div *ngIf="editForm.get(['de'])!.invalid && (editForm.get(['de'])!.dirty || editForm.get(['de'])!.touched)">
              <small class="form-text text-danger" *ngIf="editForm.get(['de'])?.errors?.required" appTranslate="entity.validation.required">
                O campo é obrigatório.
              </small>
            </div>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_para">
              <fa-icon [icon]="['fas', 'arrow-left']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.para">Turma de Destino</span>
              <span class="text-danger">*</span>
            </label>
            <select
              class="form-control"
              id="field_para"
              data-cy="para"
              name="para"
              formControlName="para"
              [compareWith]="compareTurma"
              [class.is-invalid]="editForm.get(['para'])!.invalid && (editForm.get(['para'])!.dirty || editForm.get(['para'])!.touched)"
            >
              <option *ngIf="!editForm.get('para')!.value" [ngValue]="null" selected>Selecione a turma de destino</option>
              <option [ngValue]="turmaOption" *ngFor="let turmaOption of turmasSharedCollection">
                {{ turmaOption.descricao }}
              </option>
            </select>
            <div *ngIf="editForm.get(['para'])!.invalid && (editForm.get(['para'])!.dirty || editForm.get(['para'])!.touched)">
              <small
                class="form-text text-danger"
                *ngIf="editForm.get(['para'])?.errors?.required"
                appTranslate="entity.validation.required"
              >
                O campo é obrigatório.
              </small>
            </div>
          </div>
        </div>

        <div class="transfer-flow-indicator">
          <div class="transfer-arrow">
            <fa-icon [icon]="['fas', 'long-arrow-alt-right']" class="arrow-icon"></fa-icon>
            <span class="arrow-text">Transferência</span>
          </div>
        </div>
      </fieldset>

      <!-- Seção 3: Informações Complementares -->
      <fieldset class="modern-form-section">
        <legend class="modern-form-section-title">
          <fa-icon [icon]="['fas', 'users']" class="section-icon me-2"></fa-icon>
          <span>Informações Complementares</span>
        </legend>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_matricula">
              <fa-icon [icon]="['fas', 'id-card']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.matricula">Matrícula do Estudante</span>
              <span class="text-danger">*</span>
            </label>
            <select
              class="form-control"
              id="field_matricula"
              data-cy="matricula"
              name="matricula"
              formControlName="matricula"
              [compareWith]="compareMatricula"
              [class.is-invalid]="
                editForm.get(['matricula'])!.invalid && (editForm.get(['matricula'])!.dirty || editForm.get(['matricula'])!.touched)
              "
            >
              <option *ngIf="editForm.get(['matricula'])!.value == null" [ngValue]="null" selected>Selecione a matrícula</option>
              <option [ngValue]="matriculaOption" *ngFor="let matriculaOption of matriculasSharedCollection">
                {{ matriculaOption.numeroMatricula }}
              </option>
            </select>
            <div
              *ngIf="editForm.get(['matricula'])!.invalid && (editForm.get(['matricula'])!.dirty || editForm.get(['matricula'])!.touched)"
            >
              <small
                class="form-text text-danger"
                *ngIf="editForm.get(['matricula'])?.errors?.required"
                appTranslate="entity.validation.required"
              >
                O campo é obrigatório.
              </small>
            </div>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label" for="field_utilizador">
              <fa-icon [icon]="['fas', 'user']" class="me-1"></fa-icon>
              <span appTranslate="longonkeloApp.transferenciaTurma.utilizador">Utilizador Responsável</span>
            </label>
            <select
              class="form-control"
              id="field_utilizador"
              data-cy="utilizador"
              name="utilizador"
              formControlName="utilizador"
              [compareWith]="compareUser"
            >
              <option [ngValue]="null">Selecione um utilizador</option>
              <option [ngValue]="userOption" *ngFor="let userOption of usersSharedCollection">
                {{ userOption.login }}
              </option>
            </select>
            <small class="form-text text-muted"> Utilizador que autoriza a transferência </small>
          </div>
        </div>
      </fieldset>

      <!-- Botões de Ação -->
      <div class="modern-form-actions">
        <button type="button" id="cancel-save" data-cy="entityCreateCancelButton" class="btn btn-secondary me-2" (click)="previousState()">
          <fa-icon icon="ban"></fa-icon>&nbsp;<span appTranslate="entity.action.cancel">Cancelar</span>
        </button>

        <button
          type="submit"
          id="save-entity"
          data-cy="entityCreateSaveButton"
          [disabled]="editForm.invalid || isSaving"
          class="btn btn-primary"
        >
          <fa-icon icon="save"></fa-icon>&nbsp;<span appTranslate="entity.action.save">Guardar</span>
        </button>
      </div>
    </form>
  </div>
</div>
